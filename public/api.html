<!DOCTYPE html> 
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>API SERVER</title>
    <link rel="stylesheet" href="style.css">
</head>

<body>
    <style>
        a {
            text-decoration: none;
            color: #2478d3;
        }
        a:hover {
            text-decoration: underline;
        }
        .fsl {
            font-size: larger;
        }
    </style>
    <h1>API SERVER</h1>
    <li>--------------------------------------------------------------------------------------------------------------------------------------</li>
    <h2>Các API mới thêm vô</h2>

    <h3>Từ ngày 17/6/24 - Đến 24/6/24</h3>
    <li>Hôm trước thầy có góp ý phụ tùng cần có icon nên tui thêm trường mới là icon. Tui thấy hướng này dễ làm là mình sẽ tự đi tìm các icon phụ tùng xe trước. Chẳng hạn
        <a href="https://icons8.com/icons/set/gear">Link</a>. Tìm mấy phụ tùng của xe xong Copy Link to PNG của nó rồi mình để vào mảng. Khi thêm phụ tùng thị mình sẽ cho nó load ra để người dùng chọn xong bên tui sẽ lưu chuỗi đó vào db thôi (Bên web với mobile nên dùng chung để nó đồng nhất nhé)
    </li>
    <li>[GET] /salons/role</li>
    <li>[POST] /salons/role</li>
    <li>[PATCH] /salons/role</li>
    <li>[DELETE] /salons/role/:id</li> 
    <li>[POST] /salons/assign-role</li>
    <li>API get salon theo id tui không lấy ra các xe của salon đó nữa mà giờ sẽ có 1 API riêng để gọi. API get salon theo id chỉ lấy ra được các thông tin của salon thôi</li>
    <li>[GET] /cars/salon/:salon_id</li>
    <li>Có sắp xếp, hiện tại chỉ mới có cho xe, cần truyền vào VD: /cars/salon/e03942f6-1fc0-4864-9a70-647a070160d7?page=1&per_page=5&sort=price (nếu -price là sắp xếp giảm dần, muốn sắp xếp theo name cũng được)</li>
    <li>[GET] /purchase (Lấy thêm ngày mua và ngày hết hạn)</li>
    
    <h3>Từ ngày 25/6/24 - Đến 1/7/24</h3>
    <li>[GET] /salon-payment</li>
    <li>[POST] /salon-payment/create</li>
    <li>[POST] /salon-payment/confirm-user</li>
    <li>[POST] /salon-payment/confirm-salon</li>
    <li>[DELETE] /salon-payment/:id</li>
    
    <h3>Từ ngày 1/7/24 - Đến 8/7/24</h3>
    Phần lấy xe của các salon đã loại bỏ những xe đã mua rồi (available = 0)
    <li>[DELETE] /salons/employees/:id(userId)</li>
    Dùng để xóa nhân viên ra khỏi salon
    <li>[GET] /transactions</li>
    Dùng để xem lại được tất cả các lịch sử giao dịch. Đã xử lý cho hoa tiêu và salon
    <li>[GET] /invoice/get-invoice</li> (Khách hàng gọi, có thể lấy theo năm, quý, tháng (?year= , quarter= , month= , có thể kết hợp năm và quý hoặc tháng ?year=&quarter=)). Trong đây đã có tổng tiền của 3 loại hóa đơn và total_expense là tổng tất cả
    <div>Tạo phương thức thanh toán</div> 
    <li>[GET] /salon-payment/method</li>
    <li>[POST] /salon-payment/create-method</li>
    <li>[PATCH] /salon-payment/method</li>
    <li>[DELETE] /salon-payment/method/:id</li>
    <li>[GET] /salon-payment/method</li>
    <li>[POST] /salon-payment/create-method</li>
    <li>[PATCH] /salon-payment/method</li>
    <li>[DELETE] /salon-payment/method/:id</li>
    <li>[POST] /salon-payment/create</li>
    <li>[POST] /invoice/get-invoice-buy-car-salon</li>
    Thêm cái payment_done: là thanh toán hay chưa, còn done cũ là đã hoàn tất qui trình hay chưa.
    <li>[POST] /invoice/statistics</li>
    có thêm doanh thu theo quý.
    <li>[POST] /invoice/get-top</li>
    có chỉnh nhiều, nên đọc kĩ lại.
    <li>[POST] /invoice/statistics-admin</li>
    có thêm lấy top các tính năng.
    <li>[GET] /transactions/statistics</li>
    Thống kê cho hoa tiêu và salon về giao dịch buôn bán xe (Bên salon cũng cần gọi API này để thống kê những hoa tiêu đã hoàn thành giao dịch với mình. Nếu bên hoa tiêu là số tiền nhận được thì bên salon là số tiền đã chi)
    <li>[PATCH] /appointment/read</li>
    Update read trong appointment.
    
    <h3>FINAL</h3>
    <li>[POST] /warranty/add-maintenance</li>
    Thêm gói bảo dưỡng vào gói bảo hành
    <li>[POST] /warranty/remove-maintenance</li>
    Xoá gói bảo dưỡng vào gói bảo hành.
    <li>[POST] /invoice</li>
    Khi tạo giao dịch bảo dưỡng xe thì có thể truyền vào invoiceId để check xem nó có bảo hành không ? (Phần search thông tin hóa đơn xong cho fill vào thì dùng [POST] /invoice/lookup xong truyền invoiceId để lấy thông tin)
    <li>[GET] /cars/salon/:salon_id?available=0</li>
    <li>[GET] /cars/user</li>
    Dùng để lấy ra toàn bộ xe mà khách hàng đã mua (phía khách hàng gọi).
    <li>--------------------------------------------------------------------------------------------------------------------------------------</li>

    <h2>MỤC LỤC</h2>

    <li><a href="#auth" class="fsl">Auth</a></li>
    <li><a href="#facebook-mobile" class="fsl">Facebook Mobile</a></li>
    <li><a href="#profile" class="fsl">Profile</a></li>
    <li><a href="#payment" class="fsl">Payment</a></li>
    <li><a href="#feature" class="fsl">Feature</a></li>
    <li><a href="#package" class="fsl">Package</a></li>
    <li><a href="#car" class="fsl">Car</a></li>
    <li><a href="#salon" class="fsl">Salon</a></li>
    <li><a href="#purchase" class="fsl">Purchase(Mua gói dịch vụ)</a></li>
    <li><a href="#appointment" class="fsl">Lịch Hẹn</a></li>
    <li><a href="#chat" class="fsl">Chat</a></li>
    <li><a href="#notification" class="fsl">Thông Báo</a></li>
    <li><a href="#video" class="fsl">Video Call</a></li>
    <li><a href="#permission" class="fsl">Phân Quyền</a></li>
    <li><a href="#new" class="fsl">Tin Tức</a></li>
    <li><a href="#warranty" class="fsl">Bảo Hành</a></li>
    <li><a href="#invoice" class="fsl">Hóa Đơn Bảo Hành</a></li>
    <li><a href="#mInvoice" class="fsl">Hóa Đơn Bảo Dưỡng</a></li>
    <li><a href="#maintenance" class="fsl">Bảo Dưỡng</a></li>
    <li><a href="#accessory" class="fsl">Phụ Tùng</a></li>
    <li><a href="#statistical" class="fsl">Thống Kê Doanh Thu</a></li>
    <li><a href="#legal" class="fsl">Giấy Tờ Pháp Lý</a></li>
    <li><a href="#process" class="fsl">Quy Trình</a></li>
    <li><a href="#stage" class="fsl">Giai Đoạn Hoa Tiêu</a></li>
    <li><a href="#post" class="fsl">Yêu Cầu Đăng Bán Xe</a></li>
    <li><a href="#block" class="fsl">Chặn Hoa Tiêu</a></li>
    <li><a href="#connection" class="fsl">Kết Nối</a></li>
    <li><a href="#commission" class="fsl">Ghi Nhận Hoa Hồng</a></li>
    <li><a href="#pagination" class="fsl">Phân Trang</a></li>
    <li><a href="#buy-accessory" class="fsl">Hóa Đơn Mua Phụ Tùng</a></li>
    <li><a href="#promotion" class="fsl">Đăng Tin Khuyến Mãi</a></li>
    <li><a href="#group" class="fsl">Tạo Group Salon</a></li>
    <li><a href="#notification-offline" class="fsl">Notification Khi Offline</a></li>
    <li><a href="#salon-payment" class="fsl">Salon tạo phiếu thanh toán</a></li>

    <h3>Chú ý: Với các hành động liên quan đến quản lý salon như thêm nhân viên, thêm xe,... của salon - các hành động cần quyền
        thì mới có thể làm được với salon thì cần gửi đi salonId. Vì cần thông tin này thì mới xác định được chính xác người đó có quyền gì.
    </h3>

    <h2 id="auth">AUTH</h2>
    <li>[POST] /auth/refresh</li>
    Cần truyền refreshToken vô bằng cookies - web or body - mobile để nhận lại token mới.
    <li>[POST] /auth/logout</li>
    Không cần truyền gì hết, trực tiếp logout.
    <li>[POST] /auth/register</li>
    Đăng kí tài khoản bằng username và password. Cần truyền vô username, password, fullname. Cần truyền vô body.
    <li>[POST] /auth/login</li>
    Đăng nhập bằng username và password. Truyền vô Db.
    <li>[GET] /auth/google</li>
    [WEB]: Gọi đến router này và server sẽ redirect về một trang html để chọn tài khoản google.
    [MOBILE]: Tiến hành tự gọi đến api của google để chọn tài khoản google.
    Toàn bộ sẽ nhận được một mã code và cần truyền mã code này đến callback.
    <li>[GET] /auth/google/callback</li>
    Sau khi nhận mã code ở trên thì cần gửi vào api này với cách truyền thêm ?code=...
    <li>[GET] /auth/facebook</li>
    Tương tự với google. Nhưng cần add tài khoản để thử nghiệm.
    <li>[GET] /auth/facebook/callback</li>
    Tương tự như trên.
    
    <h3 id="facebook-mobile">FACEBOOK MOBILE</h3>
    <li>[POST] /auth/facebook-mobile</li>
    Cần truyền vô accesstoken. Về liên kết tài khoản thì cũng gọi đến router này luôn. Và không cần truyền gì thêm chỉ truyền accesstoken
    của account mới cần liên kết với nó (account cần liên kết không phải account đang login).
    <li>[POST] /auth/change-pw</li>
    Thay đổi password or là cập nhật password lúc đầu khi người dùng lần đầu tiên được mời vô hệ thống bằng mail. Nếu là mời vào bằng mail thì cần set:
    {newPassword}. Còn nếu là cập nhật password thì cần truyền vô {oldPassword, newPassword};
    <li>[POST] /auth/forgot-pw</li>
    Quên mật khẩu và muốn lấy mật khẩu mới. Cần nhập vô email. Server sẽ gửi 1 mã gồm 6 chữ số đến mail đó. Client cần chuyển sang màn hình nhập 6 kí tự.
    <li>[POST] /auth/verify-forgot-pw</li>
    Đây là bước xác thực thứ 2. Yêu cầu gửi mã code trong mail của người dùng. cụ thể gửi các thông tin :
    {email, code}. Nếu server xác nhận là đúng code rồi thì server sẽ trả về một mã code mới nhằm phục vụ đổi password mới. 
    Và client cần chuyển sang màn hình
    nhập password mới cho user.
    <li>[POST] /auth/renew-forgot-pw</li>
    Đây là bước xác thực cuối cùng. Yêu cầu gửi:
    {code: mã code server gửi về cho client lúc trước, email: email của user, newPassword: mật khẩu mới}. Nếu thành công thì client cần chuyển sang trang đăng 
    nhập cho user.

    <h2 id="profile">PROFILE</h2>
    <li>[GET] /users/profile</li>
    Chỉ cần login thành công và gọi tới là lấy được profile của user.
    <li>[PATCH] /users/profile</li>
    Đây là cập nhật thông tin profile.
    Lưu ý cần truyền vào các thuộc tính giống với thông tin trong DB của bảng User.
    Các fields bao gồm: fullname, gender, phone, address, date_of_birth, avatar. Muốn update cái nào thì truyền cái đó
    Không cần truyền vào user_id vì khi login thành công, đã có token chứa user_id bên trong header.
    
    <h2 id="payment">PAYMENT</h2>
    <li>[POST] /payment/createOrder</li>
    Tạo đơn hàng. Chúng ta cần lưu lại app_tran_id để query đơn hàng khi cần.
    Nếu không truyền vào dữ liệu gì thì mặt định là zalopay app và đơn hàng sẽ mang giá trị 0đ. Nếu muốn chuyển sang
    visa thì cần thêm
    dữ liệu là {"bank_code": "CC", ... thêm amount: number, description nếu muốn}.
    <li>[POST] /payment/queryOrder</li>
    Đây là dùng để query trạng thái đơn hàng đã được thanh toán chưa. Cần truyền vô {"app_trans_id": "mã đơn hàng "}.
    <h3>VN PAY</h3>
    <li>[POST] /payment/create_payment_url</li>
    Cần truyền vô id của gói mà muốn mua {package_id : "id", months: number}. Để gọi được thì người dùng cần phải login thành công.
    Sẽ nhận lại một url, cần mở link lên trong trình duyệt và thực hiện nhập thông tin thanh toán.
    Chọn ngân hàng nội quốc và thông tin thẻ như sau:
    <table>
        <tr>
            <th>Ngân hàng</th>
            <td>NCB</td>
        </tr>
        <tr>
            <th>Số thẻ</th>
            <td>9704198526191432198</td>
        </tr>
        <tr>
            <th>Tên chủ thẻ</th>
            <td>NGUYEN VAN A</td>
        </tr>
        <tr>
            <th>Ngày phát hành</th>
            <td>07/15</td>
        </tr>
        <tr>
            <th>Mật khẩu OTP</th>
            <td>123456</td>
        </tr>
    </table>
    Thanh toán thành công thì sẽ được redirect đến localhost:3000/payment/vnpay?rs=success& ...với chuỗi thì cần giải mã để ra chuỗi đúng.
    Cần hiển thị lại cho người dùng là thanh toán thành công và thông tin đã thanh toán.
    Thất bại thì  localhost:3000/payment/vnpay?rs=failed
    Bên web chú ý tạo thêm router để nhận và hiển thị hoặc thông báo nhé.
    
    <h2 id="feature">FEATURE</h2>
    <li>[GET] /features</li>
    Lấy được hết tất cả những tính năng
    <li>[GET] /features/:id</li>
    Lấy được tính năng khi biết id
    <li>[POST] /features</li>
    Thêm một tính năng mới. Các fields truyền vào bao gồm: name, description
    <li>[PATCH] /features/:id</li>
    Sửa một tính năng khi biết id. Các fields có thể sửa: name, description
    <li>[DELETE] /features/:id</li>
    Xóa tính năng khi biết id

    <h2 id="package">PACKAGE</h2>
    <li>[GET] /packages</li>
    Lấy được hết tất cả các gói dịch vụ kèm theo tính năng mà gói dịch vụ đó có
    <li>[GET] /packages/:id</li>
    Lấy được gói dịch vụ khi biết id
    <li>[POST] /packages</li>
    Truyền ở dạng form-data
    Thêm một gói dịch vụ mới. Các fields truyền vào bao gồm: name, description, price, features (là một mảng (array) id
    các tính năng), image (1 file). Nếu price < 0 thì sẽ báo lỗi
    <li>[PATCH] /packages/:id</li>
    Truyền ở dạng form-data
    Sửa một tính năng khi biết id. Các fields (giống post), muốn update cái nào thì truyền cái đó (Nếu price < 0 thì
    sẽ báo lỗi)
    <li>[DELETE] /packages/:id</li>
    Xóa gói dịch vụ khi biết id

    <h2 id="car">CAR</h2>
    <li>[GET] /cars</li>
    Lấy được hết tất cả các xe kèm theo tên và địa chỉ salon mà xe đó thuộc về
    <li>[GET] /cars/:id</li>
    Lấy được xe khi biết id
    <li>[GET] /cars/salon/:salon_id?available=0</li>
    Lấy được hết tất cả các xe khi biết id của 1 salon (có tìm kiếm, sắp xếp, phân trang). Nếu truyền available = 0 thì lấy theo xe đã bán, = 1 thì chưa bán, không truyền thì lấy hết.
    <li>[GET] /cars/brand/:brand/salon/:salon_id</li>
    Lấy được hết tất cả xe của cùng hãng xem truyền vào tên hãng trong 1 salon
    <li>[POST] /cars</li>
    Truyền ở dạng form-data
    Thêm một xe mới. Các fields truyền vào bao gồm: name (Tên xe), description (Mô tả), origin (Xuất xứ), price
    (Giá), brand (Hãng xe), model (Mẫu mã xe), type (Dòng xe), capacity (Dung tích xe), door (Số cửa), seat (Số
    ghế ngồi), kilometer (Số km đã đi), gear (Hộp số), mfg (Năm sản xuất), inColor (Màu nội thất), outColor (Màu
    ngoại thất), salonId (Id Salon mà xe này thuộc về), image (tối đa là 5 file), available: number - số lượng xe, không truyền thì mặc định là 1. Nếu price < 0 thì sẽ báo
    lỗi.
    <li>[PATCH] /cars/:id</li>
    Truyền ở dạng form-data
    Sửa thông tin xe khi biết id. Các fields (giống post), muốn update cái nào thì truyền cái đó (Nếu price
    < 0 thì sẽ báo lỗi)
    <li>[DELETE] /cars/:id</li>
    Xóa xe khi biết id

    <li>[GET] /cars/user</li>
    Dùng để lấy ra toàn bộ xe mà khách hàng đã mua (phía khách hàng gọi).

    <h2 id="salon">SALON</h2>
    <li>[GET] /salons</li>
    Lấy được hết tất cả các thông tin của salon
    <li>[GET] /salons/my-salon</li>
    Lấy được thông tin salon của user đang đăng nhập và các xe mà salon đó có
    <li>[GET] /salons/:id</li>
    Lấy được thông tin salon khi biết id và các xe mà salon đó có
    <li>[POST] /salons</li>
    Truyền ở dạng form-data
    Thêm một salon mới. Các fields truyền vào bao gồm: name, address, image (1 file), email,
    phoneNumber, banner (tối đa 5 file), introductionHtml, introductionMarkdown
    <li>[PATCH] /salons/:id</li>
    Truyền ở dạng form-data
    Sửa một salon khi biết id. Các fields (giống post), muốn update cái nào thì truyền cái đó
    <li>[DELETE] /salons/:id</li>
    Xóa salon khi biết id
    <li>[POST] /salons/invite</li>
    Cần đăng nhập để mời người dùng join vào group của mình (tương lai). Cần truyền vô email của người cần mời vào body.
    Người được mời cần vô mail kích vào đường dẫn để đi đến xác thực. Hệ thống sẽ tự động thêm tài khoản mới cho người
    đó nếu chưa có tài khoản.
    Username là email và password sẽ tự động được gửi vào email sau khi người dùng ấn liên kết.
    <li>[GET] /salons/verify-invite/:token</li>
    Bên web sẽ cần lấy ra token khi người dùng ấn liên kết trong email khi được mời. Web cần xử lý và gửi token về cho
    server để xác nhận. Phía server sẽ trả về token đăng nhập thành công. Frontend cần chuyển vô trang bắt user đổi password mới rồi mới cho truy cập tiếp. Và tiếp theo hãy 
    hướng đến api change password ở auth.
    <li>[POST] /salons/verifyInviteUser</li>
    Người dùng vô xác nhận lời mời vô salon. Cần truyền vô token (lưu tại data) được lưu trữ trong notification có types là invite. Muốn huỷ thì gọi
    đến api xóa thông báo đó là được.
    <li>[POST] /salons/employees</li>
    Dùng để lấy ra toàn bộ danh sách nhân viên trong salon. Cần truyền vô {salonId}.
    <li>[DELETE] /salons/employees/:id</li>(userId)
    Dùng để xóa nhân viên ra khỏi salon. Xóa là gán lại cột salonId của user là "" và gán lại quyền là [""]
    <h3>Tạo role - Cần là chủ salon đăng nhập</h3>
    <li>[GET] /salons/role</li>
    lấy ra danh sách các role của salon.
    <li>[POST] /salons/role</li>
    Tạo role mới. Cần truyền vô {salonId, name: tên role, permissions: ["C_ABC", "R_ABC", ...]}
    <li>[PATCH] /salons/role</li>
    Cập nhật thông tin name or permissions của role đó. Cần truyền vô: {id: id của role, name, permissions, salonId}.
    Với name và permision muốn cập nhật cái nào thì truyền vô cái đó (có thể không truyền).
    <li>[DELETE] /salons/role/:id</li> 
    Dùng để xóa role với id đó.
    <li>[POST] /salons/assign-role</li>
    gán role cho nhân viên của salon. Cần truyền vô: {employeeId: id của nhân viên, roleId: id của role}. Không cần gỡ role ra khỏi nhân viên vì 
    nó salon có thể gán role nhân viên bình thường nếu muốn.

    <h2 id="purchase">PURCHASE</h2>
    <li>[GET] /purchase</li>
    Sẽ lấy ra được id gói, các keyMap cùng với purchaseDate và expirationDate.
    Cho biết user đã mua được những gói dịch vụ nào rồi và các chức năng có trong gói đó. Cái tính năng bây giờ có
    thêm cái keyMap để mình có thể dựa vào đó để render ra các tính năng tương ứng cho user sử dụng. Cái id nó generate ra
    ngẫu nhiên nên không dùng được

    <h2 id="appointment">Lịch hẹn</h2>
    <h3>User: Cần đăng nhập thành công.</h3>
    <li>[POST] /appointment/create-appointment</li>
    cần truyền vô các thông tin: { "salonId": "6f15ea80-b5b5-4546-8cb3-08d3f6c45445","date": "2024-03-22 14:01:06.913+07","description": "lich hen voi salon 2", "carId": "id car"}
    <li>[POST] /appointment/get-appoint-user</li>
    không truyền = get all.
    truyền vô id = get theo id.
    truyền vô status: number = get theo status,

    <li>[PATCH] /appointment/update-one-user</li>
    truyền vô id, và thông tin cần update như description, Không thể update status và date.
    <li>[DELETE] /appointment/delete-appoint-user</li>
    <div>
        <b>Lưu ý: phương thức delete có đặc thù là bỏ hết vô biến data thì mới truyền bằng body được.</b>
    </div>
    không truyền gì: xóa tất cả.
	truyền vô id: xóa lịch hẹn theo id đó.
    <div>
        <b>status: 0 - chưa chấp nhận | </b>
        <b>status: 1 - đã được chấp nhận| </b>
        <b>status: 2 - bị từ chối gặp</b>
    </div>

    <li>[PATCH] /appointment/read</li>
    Khi user ấn vô lịch hẹn thì gọi đến api này để cập nhật thuộc tính read trong lịch hẹn thành true (user đã đọc toàn bộ lịch hẹn).

    <h3>Salon admin: cần đăng nhập thành công và là admin của group đó. Luôn phải truyền vào salonId.</h3>
    <li>[POST] /appointment/get-appoint-admin</li>
    Không truyền thêm = lấy tất cả cuộc hẹn.
	Truyền thêm id = lấy cuộc hẹn có id đó.
    <li>[PATCH] /appointment/update-one-admin</li>
    cần truyền thêm id của cuộc hẹn. Chỉ có thể update status: 1 2. bên fe sẽ xử lý tùy theo yêu cầu mà truyền vô.
    <li>[DELETE] /appointment/delete-appoint-admin</li>
    <div>
        <b>Lưu ý: phương thức delete có đặc thù là bỏ hết vô biến data thì mới truyền bằng body được.</b>
    </div>
    không truyền gì thêm: xóa hết.
	truyền thêm id: xóa cuộc hẹn đó.

    <li>[POST] /appointment/get-busy-car</li>
    lấy ra thời gian mà xe đã được hẹn. Dùng để ẩn đi các khung thời gian này với khách hàng, tránh khách hàng hẹn trùng giờ nhau. Bên client cần chuyển
    sang khung giờ phù hợp. 
    <div>Yêu cầu truyền vô {salonId, carId}</div> Và chỉ cần user đăng nhập là có thể lấy được.

    <h3>Lịch hẹn cho qui trình: salon hẹn khách hàng</h3>
    <li>[POST] /appointment/get-appoint-user</li>
    Có cập nhật để lấy ra danh sách lịch hẹn mà salon hẹn user.
    <li>[POST] /appointment/get-appoint-admin</li>
    Có cập nhật để lấy ra danh sách lịch hẹn mà salon hẹn user.
    <li>[POST] /appointment/create-appointment-process</li>
    Dùng để cho salon tạo lịch hẹn với user. Cần truyền vô: 
    <div>
        {
            "carId": "b3901fe8-77c3-49cc-8b15-c771b0f75af5",
            "salonId": "e03942f6-1fc0-4864-9a70-647a070160d7",
            "phone": "0123456789",
            "date": "2024-05-22",
            "description": "Hen hoan tat thu tuc"
        }
    </div>

    <li>[PATCH] /appointment/response-appointment-process</li>
    Khách hàng phản hồi lại lời mời hẹn của salon. Cần truyền vô: 
    <div>
        { 
            "status": 1 (chấp thuận); 2 (từ chối),
            "id": "4640267d-2037-4062-b3c9-486c3afd14bc"
        }
    </div>
    Note: Lưu ý là phải đăng nhập + cập nhật đúng số điện thoại.
    Note2: về phần thông báo lịch hẹn này thì sẽ có type là "appointment-process" và data là id của lịch hẹn.

    <h2 id="chat">CHAT</h2>
    <b>Có 2 event: getOnlineUsers, newMessage</b>
    <h4 style="font-weight: 500;">Khi bên Frontend kết nối với socket thì trước đó tụi ông cần gọi API này 
    <b>http://localhost:5000/salons/salonId</b> để biết xem thằng user đang đăng nhập đó có phải là chủ salon không. Nếu
    trả về salonId !== null nghĩa là nó là chủ salon thì chỗ query tụi ông truyền vào cho tui thêm cái salonId đó nữa, còn nếu là null thì chỉ truyền qua user_id thôi. Mục đích của việc này là để biết được
    thằng nào đang online mà hiển thị trạng thái và xử lý cho phần thông báo.
    <h4 style="font-weight: 500;">Đây là code bên web:</h4>
    <pre>
        if(res.data.salonId === null){
            socket = io("http://localhost:5000", {
            query: {
              userId:profile.user_id
            }
          });
        }else{
          socket = io("http://localhost:5000", {
            query: {
              userId: profile.user_id,
              salonId : res.data.salonId
            }
          });
        }
    </pre>
    <li>[GET] /messages/chatting-users </li>
    Nó sẽ lấy được những thông tin user mà mình đã chat có thể là hoa tiêu hoặc salon (Cái hoa tiêu giờ tạm thời nó vẫn là user), tui có thêm một cái nữa là lấy được tin nhắn cuối cùng mà nó đã nhắn cho thằng đó kèm theo thời gian (còn ngày tháng năm thì tui sẽ xử lý sau). Tụi ông dựa vào đây để nó cập nhật lại cái user bên thanh sidebar.
    Nếu tin nhắn cuối cùng mà thằng user đang đăng nhập gửi thì nó sẽ ghi là bạn như messenger, còn không thì nó là rỗng
    <h4 style="font-weight: 500;">Trả về như sau:</h4>
    <pre>
    {
        "status": "success",
        "chattingUsers": [
            {
                "id": "d44bedce-4033-4831-b172-ac8fccfa627b",
                "name": "nguyentest2",
                "username": "nguyentest1",
                "image": "https://avatar.iran.liara.run/username?username=nguyentest1",
                "message": {
                    "sender": "Bạn",
                    "message": "Xin chao ban",
                    "time": "08-06-2024 22:26:46",
                    "conversation_status": true
                }
            },
            {
                "id": "142ffd35-e0f9-457e-a7e2-725ad5710ec2",
                "name": "nguyen dep trai test",
                "image": "https://res.cloudinary.com/dok6ou3xz/image/upload/v1710493365/salon-car/fqptwtyxpniglnsmhyby.jpg",
                "message": {
                    "sender": "Bạn",
                    "message": "Toi hoi xe lamboghini",
                    "time": "20-05-2024 12:00:35",
                    "conversation_status": false
                }
            }
        ]
    }
    </pre>
    <h4>Giờ nó có thêm 1 cái nữa là cái status của conversation cho biết là thằng đó đã đọc tin hay chưa. Thì lúc gửi mặc định là nó chưa đọc. Nào nó gọi API [GET] /messages/:id nghĩa là nó ấn vào user rồi thì nó mới đọc. Tui để biến đó có kiểu là boolean. Khi chưa đọc thì nó là false, đọc rồi thì nó là true. Thì tụi ông kiểm tra nếu chưa đọc thì cho chữ nó in đậm lên như messenger chẳng hạn. Bên mess nó cũng có thêm cái nữa là giả sử mình đang nhắn tin trực tiếp mà lúc mình nhận được tin nhắn thì nó vẫn hiểu mình chưa đọc, nào mình gõ trên bàn phìm thì nó cập nhật lại mình đọc rồi thì cái này tui chưa làm được (nếu làm theo kiểu cho nó gọi API liên tục thì thấy không ổn)</h4>
    <h4>CHÚ Ý: Tụi ông cứ test là chat giữa 2 user với nhau nhưng lưu ý là đừng chat với thằng làm chủ salon, chỉ chat với salon của nó thôi</h4>
    <h4>Các thông tin lấy bao gồm: id (user_id hoặc salon_id), tên (name), ảnh (image)</h4>
    <li>[GET] /messages/:id </li>
    Sẽ lấy ra được các object message mà giữa user đang đăng nhập và user_id hoặc salon_id truyền vào đó đã chat với nhau, sẽ trả về như sau:
    <pre>
        {
            "message_id": "b190ac38-0207-4114-89d3-af56d3f13788",
            "senderId": "d5ca4fa6-e89e-408f-aeab-d1c855467ab5",
            "receiverId": "d4f769bb-ecd7-4211-b93c-448cf9d1ad92",
            "message": "",
            "image": [
                "https://res.cloudinary.com/dok6ou3xz/image/upload/v1716782600/salon-car/blajqhf3axf69dgro7px.jpg"
            ],
            "createdAt": "09-04-2024 21:07:32",
            "updatedAt": "09-04-2024 21:07:32"
        },
        {
            ...
        }
    </pre>
    <div>Thì tại đây tụi ông cần kiểm tra. Nếu như message là chuỗi rỗng thì nó gửi ảnh, còn nếu image là mảng rỗng thì là gửi text để hiển thị. Nếu message bắt đầu bằng http thì cho thẻ a để nó có thể link tới</div>
    <h4 style="font-weight: 500;">Trong code tui cũng đã có comment lại chỗ chỉ lấy message thôi</h4>
    <li>[POST] /messages/send/:id (id là người nhận)</li>
    Cần truyền vào nội dung của tui nhắn hoặc gửi ảnh thì truyền vào imgList (array tối đa 10 ảnh). Truyền theo form-data. VD như sau:
    <pre>
        {
            "message": "Nguyen test"
        }
    </pre>
    <b>Nhớ handle đừng cho nó gửi message là chuỗi rỗng nhé</b>
    <li>[GET] /messages/search </li>
    Truyền vào q dạng query (?q=) để search theo tên. Nếu như là user thường thì khi search sẽ ra tất cả các salon hiện có. Còn nếu là salon thì nó chỉ search ra được các user mà đã nhắn tin với salon mình
    <h2></h2>
    
    <h2 id="notification">Thông báo</h2>
    <h3>User: Cần đăng nhập thành công.</h3>
    <li>[POST] /notification/get-notification-user</li>
    không truyền = get all.
    truyền vô id = get theo id.
    <li>[PATCH] /notification/read-notification-user</li>
    chỉ cần truyền vào id của thông báo đó.
    <li>[DELETE] /notification/delete-notification-user</li>
    <div>
        <b>Lưu ý: phương thức delete có đặc thù là bỏ hết vô biến data thì mới truyền bằng body được.</b>
    </div>
    không truyền gì: xóa tất cả.
	truyền vô id: xóa lịch hẹn theo id đó.

    <h3>Salon admin: cần đăng nhập thành công và là admin của group đó. Luôn phải truyền vào salonId.</h3>
    <li>[POST] /notification/get-notification-admin</li>
    Không truyền thêm = lấy tất cả cuộc hẹn.
	Truyền thêm id = lấy cuộc hẹn có id đó.
    <li>[PATCH] /notification/read-notification-admin</li>
    chỉ cần truyền thêm vào id của thông báo đó.
    <li>[DELETE] /notification/delete-appoint-admin</li>
    <div>
        <b>Lưu ý: phương thức delete có đặc thù là bỏ hết vô biến data thì mới truyền bằng body được.</b>
    </div>
    không truyền gì thêm: xóa hết.
	truyền thêm id: xóa cuộc hẹn đó.
    <b>Socket: </b> 
    Bên client cần lắng nghe (.io) sự kiện "notification" được gửi từ server.
    
    <h2 id="video">VIDEO CALL</h2>
    <li>[GET] /videocall/get-token</li>
    Nhận về token meeting.
    <li>[POST] /videocall/create-meeting</li>
    Tạo meeting, cần truyền vô token và region
    <li>[POST] /videocall/validate-meeting/:meetingId</li>
    cần truyền vô token bằng body và meetingId ở params.
    <b>Url client cần thiết lập là: http://localhost:5000/videocall/</b>
    <h3>ZegoCloud</h3>
    <li>[POST] /videocall/get-token-zegocloud</li>
    Dùng để nhận token. Yêu cần phải đăng nhập.
    
    <h2 id="permission"> Phân quyền</h2>
    Luôn phải truyền vô salonId.
    <li>[POST] /salons/user</li>
    Yêu cầu: là chủ salon. Cần truyền vô salonId. Dùng để lấy ra danh sách tất cả các nhân viên và quyền của họ.
    <li>[POST] /salons/permission</li>
    Yêu cầu: là chủ salon. Dùng để cấp quyền or thu hồi quyền của nhân viên. Cần truyền vô
    <div>
        {"salonId": "id salon", "permission": ["quyền 1", "quyền 2"], "userId": "id user cần cấp quyền."}
    </div>
    <h3>Quy ước kí hiệu quyền:</h3>
    <div>OWNER: chủ salon</div>
    <div>C_X: Cho phép thêm X</div>
    <div>R_X: Cho phép đọc X</div>
    <div>U_X: Cho phép cập nhật X</div>
    <div>D_X: Cho phép xóa X </div>
    <div>Với X là:</div>
    <div>EMP: nhân viên.</div>
    <div>SL: salon</div>
    <div>CAR: xe </div>
    <div>APM: lịch hẹn</div>
    <div>WRT: bảo hành</div>
    <div>MT: bảo dưỡng</div>
    <div>NTF: thông báo</div>
    <div>IV: hóa đơn</div>

    <h2>--------ADMIN--------</h2>
    <div>tài khoản admin - bên web của chúng ta: </div>
    <div>usernamel: admin-team-salon-oto</div>
    <div>password: admin123abcDEF@@</div>

    <li>[POST] /admin/</li>
    Lấy ra danh sách tất cả các quyền. Yêu cầu phải là admin team - đăng nhập bằng tài khoản admin được cung cấp.
    <li>[POST] /admin/update-permission</li>
    Cập nhật quyền cho toàn bộ hệ thống. Yêu cầu phải là admin team - đăng nhập bằng tài khoản admin được cung cấp. có thể truyền vô như sau:
    <div>
        {
            "method": ["C", "R"],
            "key": "NTTF",
            "name": "Test thoi do"
        }
        muốn thay đổi name or method thì có thể hiệu chỉnh. Nếu muốn bỏ bớt 1 method R_key thì không truyền method đó mà chỉ truyền cái khác. Lưu ý không
        được thay đổi key. Key mới sẽ thành 1 tính năng mới.
    </div>
    <li>[GET] /admin/users</li>
    Lấy ra full danh sách user.
    <li>[POST] /admin/create-user</li>
    Tạo 1 user mới. Yêu cầu truyền vô: {fullname: option, username, password, role: option}
    <li>[DELETE] /admin/user/:userId</li>
    Xóa 1 user nếu user đó có thông tin trống (chưa có dữ liệu gì), sẽ chặn không cho login nếu user đó có dữ liệu rồi.
    <li>[GET] /admin/salons</li>
    Lấy ra full danh sách salon.
    <li>[DELETE] /admin/salon/:salonId</li>
    Xóa 1 salon nếu user đó có thông tin trống (chưa có dữ liệu gì), sẽ chặn salond đó và giải tán nhân viên nếu salon đó có dữ liệu rồi.

    <h2 id="new">CRAWL NEWS</h2>
    Link trang mà tui crawl: <a href="https://lifestyle.znews.vn/oto-xe-may.html">Zing</a>
    (Tui cào dữ liệu ở phần tin mới)
    <div>
        <b>
        Phần này tui đã crawl được rồi. Tui cũng set là cứ 1 ngày nó crawl 1 lần và chỉ crawl những dữ liệu mới. Tụi ông
        dùng link này để gọi API nha:
        </b>
    </div>

    <a href="https://crawl-data-pink.vercel.app/">https://crawl-data-pink.vercel.app/</a>


    <li>[GET] /articles </li>
    <div>Nó lấy ra các bài báo gồm:</div>
    <li>id</li>
    <li>thumbnail</li>
    <li>title</li>
    <li>publish (ngày)</li>
    <li>summary (tóm tắt)</li>
    <li>page (số trang)</li>
    <li>perPage (số phần tử mỗi trang)</li>
    <li>total (tổng cộng)</li>
    <li>hasNextPage (có trang tiếp theo không)</li>
    
    <div>
    Tụi ông có thể dùng query string page và perPage để lấy ra số trang và số phần tử mỗi trang mà mình muốn
    </div>
    <b>VD:</b>
    <a href="https://crawl-data-pink.vercel.app/articles?page=2&perPage=4">
        https://crawl-data-pink.vercel.app/articles?page=2&perPage=4
    </a>
    <div>Nếu không truyền vào thì mặc định là lấy ra trang đầu tiên và lấy ra 5 bài</div>
    <li>[GET] /articles/:id </li>
    <div>Sẽ lấy ra nội dung của bài báo đó 
        <b>(Khi hiển thị ngày ra tụi ông lấy cái publish nha, đừng lấy meta.publish)</b>
    </div>
    <b>Có điểm cần chú ý chỗ này là</b> 
    <div>Nhiều khi nó ghi là caption nhưng nó lại là nội dung. Thì chắc tụi ông phải kiểm tra nếu caption nó ngắn thì nó mình hiển thị caption, còn không thì hiển thị giống nội dung
    .Cái này là do trang web nó vậy, có lúc nó kiểu vậy, lúc lại kiểu khác</div>
    <b>VD:</b>
    <div>Link này thì nó có caption rõ ràng:</div>
    <a href="https://lifestyle.znews.vn/tesla-cybertruck-tang-gia-chong-mat-post1469547.html">
        https://lifestyle.znews.vn/tesla-cybertruck-tang-gia-chong-mat-post1469547.html
    </a>
    <div>Còn link này:</div>  
    <a href="https://lifestyle.znews.vn/suzuki-jimny-mo-ban-tai-viet-nam-nhap-nhat-gia-tu-789-trieu-dong-post1469429.html">
        https://lifestyle.znews.vn/suzuki-jimny-mo-ban-tai-viet-nam-nhap-nhat-gia-tu-789-trieu-dong-post1469429.html
    </a>
    <div>
    Mặc dù những chữ trong bài viết đó là caption nhưng thực chất nó là nội dung.
    Nên lúc ban đầu tui cào cũng rất khó(có lúc nội dung nó nằm trong thẻ p, có lúc lại lấy caption làm nội dung), phải xét trường hợp vì nếu không cào thì nó không có nội dung cho bài đó
    </div>

    <div>Ngoài ra thì nó còn có bài có cái heading</div>
    
    <b>VD:</b>
    <a href="https://lifestyle.znews.vn/vinfast-vf-e34-xuat-hien-tai-malaysia-post1469396.html">
        https://lifestyle.znews.vn/vinfast-vf-e34-xuat-hien-tai-malaysia-post1469396.html
    </a>
    <div>
    Thì nó nằm trong thẻ h3 nên in đậm.
    </div>
    <div>
    Cái cuối cùng là tui chỉ cào nội dung và hình ảnh, có nhiều bài báo nó lại có bảng, và biểu đó. Nếu muốn cào thì cũng được nhưng nó hơi khó, và tui sợ cào rồi tụi ông cũng không biết
    phải hiển thị sau. Và nếu sau này nó có kiểu mới thì mình phải if else để cào nếu muốn nên tui tạm thời không cào nó
    </div>

    <div>Chẳng hạn như 2 link này:</div>
    <div>Bảng:</div>
    <a href="https://lifestyle.znews.vn/oto-trung-quoc-lai-thang-lon-o-nuoc-ngoai-post1469258.html">
        https://lifestyle.znews.vn/oto-trung-quoc-lai-thang-lon-o-nuoc-ngoai-post1469258.html
    </a>
    <div>Biểu đồ:</div>
    <a href="https://lifestyle.znews.vn/tuong-lai-nao-cho-nhom-xe-sedan-binh-dan-tai-viet-nam-post1467912.html">
        https://lifestyle.znews.vn/tuong-lai-nao-cho-nhom-xe-sedan-binh-dan-tai-viet-nam-post1467912.html
    </a>
    
    <div>Tui chỉ cào theo format phần lớn bài báo là gồm nội dung, hình ảnh.</div>
    
    <h2 id="warranty"> Bảo hành </h2>
    <li>[POST] /warranty/create</li>
    Tạo một gói bảo hành mới. Yêu cầu truyền vô:
    <div>
        {"salonId", "name", "limit_kilometer": number,"months": number, "policy", "carId": Nếu truyền vô id của xe thì xe đó nhận thẳng gói bảo hành đó luôn. Không truyền vô cũng được.}
    </div>

    <li>[POST] /warranty/</li>
    Lấy ra danh sách các gói bảo hành của salon. Cần truyền vô:
    <div>
        {salonId, warrantyId: Nếu truyền vô id gói bảo hành thì sẽ chỉ tìm theo gói đó, không truyền thì tìm tất cả. }
    </div>
    <li>Có thể gọi đến /cars/:id cũng được để xem xe đó đã có liên kết gói bảo hành nào chưa.</li>
    <li>[POST] /warranty/push-warranty</li>
    Dùng để gán cho xe gói bảo hành. yêu cầu truyền vô:
        {salonId, warrantyId, carId}
    <li>[PATCH] /warranty/update</li>
    Dùng để cập nhật thông tin gói bảo hành. Truyền vô như sau:
    { "salonId", "newWarranty": {"warranty_id": bắt buộc, "name", "limit_kilometer", "months", "policy", "note", "reuse": boolean - mặc định là true tức là
    cho phép sử dụng lại nhằm mục đích cho phép gán gói bảo hành này cho xe khác, nếu muốn thiết lập gói báo hành này chỉ phục vụ cho chiếc xe
    duy nhất nào đó thì truyền carId và reuse = false, không truyền thì mặc định là true . Lưu ý: truyền vô cái  gì thì cập nhật cái đó chứ không
nhất thiết phải truyền vô hết các thuộc tính trong newWarranty.} }
    <li>[DELETE] /warranty/delete</li>
    Dùng để xóa luôn cả gói bảo hành. Xin lưu ý: Nếu như có xe nào đang liên kết với gói này thì cũng tự động được gỡ bỏ bảo hành với xe đó luôn.
    Truyền vô: {"salonId", "warrantyId"}
    <li>[POST] /warranty/cancel</li>
    Dùng để hủy bỏ liên kết của 1 xe với 1 gói bảo hành. Yêu cầu truyền vô:
    {"salonId", "warrantyId", "carId"}

    <li>[POST] /warranty/add-maintenance</li>
    Thêm gói bảo dưỡng vào gói bảo hành. Cần truyền vô {warrantyId, maintenanceId}
    <li>[POST] /warranty/remove-maintenance</li>
    Xoá gói bảo dưỡng vào gói bảo hành. Cần truyền vô {warrantyId, maintenanceId}
    
    <h2 id="invoice">Hóa đơn</h2>
    <li>[GET] /invoice/get-invoice</li>
    Dùng để lấy ra tất cả các hóa đơn(mua xe, mua phụ tùng, bảo dưỡng). Có phân trang. Trong đây có tổng tiền của 3 loại hóa đơn và total_expense là tổng tất cả. Có thể lấy theo năm, quý, tháng (?year = , quarter= , month=, có thể lấy năm và quý hoặc tháng luôn)
    <!-- <li>[POST] /invoice/create-invoice</li>
    Dùng để lấy ra tất cả các hóa đơn(mua xe, mua phụ tùng, bảo dưỡng). Có phân trang và search theo loại. Trong đây có total_expense là tổng số tiền -->
    <div>[POST] /invoice/get-invoice-buy-car</div>
    Tìm lịch sử giao dịch mua xe cho khách hàng. Yêu cầu khách hàng cần đăng nhập. Không truyền vô gì.
    <li>[POST] /invoice/create-invoice</li>
    Dùng để tạo ra hóa đơn phụ trách việc mua xe của khách hàng. Yêu cầu chủ salon or nhân viên có quyền C_IV .Yêu cầu truyền vô:
    {licensePlate: option,carId, salonId, note, fullname: tên khách hàng, email: email khách hàng, phone: sdt của khách hàng, expense: tổng chi phí., processId: id của qui trình cần thiết lập cho khách hàng., employeeId: id nhân viên của salon.}
    Sẽ tạo ra thông báo là cần bên khách hàng thanh toán. Type của thông báo đó là "invoice-paid". data là id của cái invoice, dùng để truyền vô khi khách hàng ấn là đã hoàn tất thanh toán thì truyền vô id đó.
    <li>[POST] /invoice/lookup</li>
    Dùng để tra cứu thông tin hóa đơn. Yêu cầu là chủ salon or có quyền R_IV.Yêu cầu truyền vô: {"invoiceId", "salonId", "phone", "licensePlate", "type"}. nếu muốn tìm theo gì thì truyền vô cái đó.
    salonId là bắt buộc. licensePlate: Biển số xe. type: loại giao dịch: "buy car", "maintenance". phone: sdt khách hàng.
    <li>[POST] /invoice/remove</li>
    Xóa invoice. Cần truyền vô: {"salonId", "invoiceId"}. Xóa hóa đơn thì sẽ xóa luôn cả tiến trình người dùng nếu có.
     Không hiểu sao delete bên postman lỗi nên dùng post để delete.
     <li>[POST] /invoice/get-invoice-buy-car-salon</li>
     Đổi từ /invocice/all lúc đầu.
     Xem tất cả danh sách toàn bộ hóa đơn mua xe của salon đó. Yêu cầu là chủ salon, or nhân viên có quyền R_IV. Truyền vô: {"salonId"}.
     Có thể tìm theo {"payment_done": hóa đơn đã thanh toán hay chưa(không truyền lấy tất cả, truyền thì true/false), "done", "employeeId"salonId, done: không truyền lấy tất cả, = false thì lấy ra các giao dịch chưa hoàn thành (user chưa hoàn thành thủ tục ), = true thì hoàn thành rồi.}. Không truyền thêm gì thì mặt định là không có.
     Trong này nó sẽ trả về thông tin xe và qui trình của xe luôn (nếu có xe đó).
    <li class="hot">[PATCH] /invoice/tick-done</li>
        Dùng để tick là hóa đơn đó đã hoàn thành tất cả qui trình cho khách hàng rồi. Cần truyền vô: {salonId, invoiceId}
    
        <h3 id="mInvoice">Hóa đơn bảo dưỡng</h3>
    <li>[GET] /invoice/get-invoice-maintenance</li>
    Nó sẽ lấy ra được thông tin tất cả các hóa đơn bảo dưỡng (xe gì, ai làm và những dịch vụ đã thực hiện, những phụ tùng đã dùng để sửa chữa) tại salon mình (Đối với chủ salon)
    <div>
        Còn nếu là khách hàng muốn xem lịch sử thì nó sẽ lấy được theo số điện thoại trên hóa đơn và số điện thoại của nó trong ứng dụng (Có gì tụi ông nhớ cập nhật số điện thoại của chính nó thì mới lấy được lịch sử nha)
    </div>
    <li>[GET] /invoice:/id</li>
    Lấy ra thông tin chi tiết của hóa đơn BẢO DƯỠNG
    <li>[GET] /invoice/by-license/:licensePlate</li>
    Truyền vào biển số xe.
    Sẽ lấy ra được thông tin tất cả về dịch vụ bảo dưỡng mà xe đó đã từng thực hiện tại salon của mình (chủ salon)
    <li>[POST] /invoice</li>
    Tạo hóa đơn bảo dưỡng mới. Các trường cần truyền vào ví dụ như sau:
    <pre>
    {
        "licensePlate": "51F-12345",
        "carName": "Toyota Crown Signia",
        "services": [
            { "maintenance_id": "0de2da74-211b-4279-9fed-6acc3e77ede5", "quantity": 2 },
            { "maintenance_id": "0fe8bd10-6c0d-44f9-afd3-fcc2ee0aacc9" }
        ],
        "accessories": [
            { "accessory_id": "085ea946-8aa2-4a01-a20a-f986b9c45007" }
        ],
        "note": "Regular maintenance",
        "fullname": "Vi Nguyen",
        "email": "levinguyen170602@gmail.com",
        "phone": "0966841272",
        "invoiceId": "c399031d-52b9-497c-b13f-588b80162cac"
    }
    </pre>
    <b>Nếu không truyền quantity vào thì mặc định nó sẽ là 1.</b>
    <b>Có thể truyền vào invoiceId</b>
    <li>[PATCH] /invoice/:id</li>
    Dùng để cập nhật hóa đơn bảo dưỡng. Có thể cập nhật {licensePlate, carName, services, accessories, note, fullname, email, phone}. Muốn cập nhật trường nào thì truyền vào trường đó. Ví dụ:
    <pre>
    {
        "licensePlate": "test",
        "services": [
            { "maintenance_id": "a3f3df0c-a41a-4c65-9161-e9c9d64ec312", "quantity": 1 }
        ],
        "note": "test"
    }
    </pre>
    <li>[DELETE] /invoice/:id</li>
    Xóa hóa đơn bảo dưỡng

    <h2 id="maintenance"> Bảo dưỡng </h2>
    <li>[GET] /maintenance</li>
    Sẽ lấy ra được tất cả các thông tin của dịch vụ bảo dưỡng (bao gồm id, tên, miêu tả, giá) kèm theo đó là id và tên của salon
    <li>[GET] /maintenance/:id</li>
    Lấy ra thông tin chi tiết của dịch vụ bảo dưỡng
    <li>[GET] /maintenance/salon/:salonId</li>
    Lấy ra được tất cả thông tin các dịch vụ bảo dưỡng mà salon đang có
    <li>[POST] /maintenance</li>
    Dùng cho chủ salon thêm một dịch vụ bảo dưỡng mới (tạm thời là chủ làm). Các thông tin cần truyền vào bao gồm: {name, description, cost}
    <li>[PATCH] /maintenance/:id</li>
    Dùng để cập nhật dịch vụ bảo dưỡng. Có thể cập nhật {name, description, cost}. Muốn cập nhật trường nào thì truyền vào trường đó
    <li>[DELETE] /maintenance/:id</li>
    Xóa dịch vụ bảo dưỡng

    <h2 id="accessory"> Phụ tùng </h2>
    <li>[GET] /accessory/salon/:salonId</li>
    Sẽ lấy ra được tất cả các thông tin phụ tụng vật liệu (bao gồm id, tên, nhà sản xuất, giá, icon) của salon đó
    <li>[GET] /accessory/:id</li>
    Lấy ra thông tin chi tiết của phụ tùng
    <li>[POST] /accessory</li>
    Dùng cho chủ salon thêm một phụ tùng mới (tạm thời là chủ làm). Các thông tin cần truyền vào bao gồm: {name, manufacturer, price, icon}
    <li>[PATCH] /accessory/:id</li>
    Dùng để cập nhật phụ tùng. Có thể cập nhật {name, manufacturer, price, icon}. Muốn cập nhật trường nào thì truyền vào trường đó
    <li>[DELETE] /accessory/:id</li>
    Xóa phụ tùng

    <h2 id="statistical">Thống kê doanh thu</h2>
    <li>[POST] /invoice/statistics</li>
    Thống kê doanh thu của salon đó. Cần có quyền R_IV or là chủ salon. Yêu cầu truyền vô: {"salonId", "fromDate": "2024-04-21" kiểu string(Không truyền mặc định là năm 2024.)}.
    <div>fromDate là thống kê từ ngày fromDate đến nay.</div>
    Dữ liệu trả về: {status, "maintenances": {"invoiceDb": [{}, {}, danh sách invoice theo bảo trì], total: tổng tất cả chi phí bảo trì., rsQuater: [100000000, 20654003, 2290000000, 0]: tổng doanh thu tương ứng với mỗi quí, totalCarSold: tổng số xe đã bán trong năm},
    "buyCars": {"invoiceDb" : [{}, {}, danh sách invoice theo mua xe], total: tổng tất cả chi phí mua xe.}, total: tổng cả 2 chi phí trên cộng lại.}
    Dữ liệu trả về có thêm: "year": {"january": {
        "value": 1,
        "total": 0
    }, ... tháng 1 đến tháng 12}. Giá trị total là tổng theo từng tháng. còn value không cần quan tâm cũng được.; 
    "avg": 840918.1666666666  Đây là giá trị trung bình cho mỗi tháng (tổng / 12).

    nếu chưa có tk test:
    đăng nhập: 
    "username": "duyanh123",
    "password": "123456".
    <div>Lưu ý: thống kê theo năm. Thay vì truyền vô là năm 2024, thì truyền vô là ngày đầu tiên của năm là "2024-01-01". Năm - tháng - ngày.</div>
    <li>[POST] /invoice/get-top</li>
    Lấy ra danh sách các loại xe ô tô bán chạy nhất. Dữ liệu đầu vào: {"salonId", year: 2024, quater: 1->4 , months: 1-> 12 }. Nếu truyền quater thì không cần truyền months. Mặc định năm 2024, tháng 01. 
    <div>
        output: {"status", "buyCarTop": [{
            "name": "Toyota",
            "quantitySold": 10
        }, ...], totalBuyCar: tổng tất cả xe đã được bán.}
        đồng thời cũng có top các gói bảo dưỡng được sử dụng nhiều nhất. Danh sách trả về trong ouput ngang cấp với buyCarTop là:
        "MTTopDb": [{"name": {thông tin gói bảo dưỡng}, "quantitySold": số lượt gói đó được bán}]
        Và cũng có top các phụ kiện được sử dụng nhiều nhất. Danh sách trả về trong ouput ngang cấp với buyCarTop là:
        "accessoriesTop": [{"name": {thông tin gói}, "quantitySold": số lượng.}]
    </div>

    <li>[POST] /invoice/statistics-admin</li>
    Thống kê doanh thu mua bán gói chức năng của hệ thống mình. yêu cầu là admin của hệ thống. Yêu cầu truyền vô: {"fromDate": "2024-04-21"}.
    Dữ liệu trả về: {status,  "purchaseDb": {purchases: [{}, {}, danh sách các giao dịch mua gói chức năng.], total: tổng tiền của tất cả giao dịch.}.}
    Dữ liệu trả về có thêm: "year": {"january": {
        "value": 1,
        "total": 0
    }, ... tháng 1 đến tháng 12}. Giá trị total là tổng theo từng tháng. còn value không cần quan tâm cũng được.; 
    "avg": 840918.1666666666  Đây là giá trị trung bình cho mỗi tháng (tổng / 12).
    "getTopPackage": [
    {
        "packageId": "f833b495-0a0f-400e-b9bf-3177d2f21f74",
        "count": "6",
        "name": "Gói Salon cơ bản"
    },...].  Đây là top các gói đã bán chạy nhất.
    <div>Mới: dữ liệu có trả về thêm mảng topFeature: đây là mảng chứa top các tính năng, mỗi cái có count giảm dần</div>


    <h2 id="legal">Giấy tờ pháp lý</h2>
    Khi tạo hóa đơn thành công thì người dùng tự đồng được thêm vào tiến trình theo số điện thoại.
    <div>
        Note: Chia thành 3 loại là process(qui trình bao gồm nhiều legal documents),  legal documents và legal details. legal documents là một giai đoạn chứa các loại giấy tờ là legal details. Cần làm là cho phép
        Salon thêm giai đoạn, tạo và thêm các details vô giai đoạn đó. Thêm người dùng vào các giai đoạn mà người dùng đã hoàn tất giấy tờ pháp lý ở ngoài thực tế,
        việc thêm này là salon thêm sau khi người dùng mua xe tại salon đó. Người dùng chỉ việc xem, còn salon thấy người dùng hoàn thành giai đoạn nào, quá trình tới 
        đâu thì salon tự cập nhật cho người dùng. 
    </div>
    <div>
        Note2: Ban đầu thì cần gán qui trình cho xe thì bây giờ không cần nữa, lúc tạo hóa đơn mua xe thì chọn qui trình rồi gán cho user thôi.
    </div>
    <li>[POST] /legals/create-process</li>
    Dùng để tạo ra 1 qui trình (như là qui trình mua xe). Cần truyền vô như sau:
    <div>
        {
            "salonId": "997af3b3-0ccc-41a2-8133-1c0f7ccf268c",
            "description": "mô tả qui trình"
            "name": "Quy trinh mua xe",
            "type": number -  qui ước 0: mua xe; 1: hoa tiêu,
            "documents": [{"name": "doc 1", "order": 1, "details": ["de 1", "de 2"]}, {"name": "doc 2", "order": 2, "details": ["de 3"]}]
        }
    </div>
    Lưu ý là nên kiểm tra đầy đủ khi truyền nhé, thiếu cái nào thì hệ thống tự bỏ cái đó nếu bản thân nó tạo lỗi.
    <li>[POST] /legals/create-documents</li>
    Tạo ra  legal documents (tức là giai đoạn). Salon thực hiện. Cần truyền vô: 
    { name, salonId, order, processId, details: ["de 4", "de 5"],}.
    <div>
        name: tên của giai đoạn.
        salonId: id salon.
        order: số thứ tự của giai đoạn, tức là giai đoạn 1, 2, 3, 4. Cần truyền vô là number.
        processId: id của qui trình cần thêm vô (vd: id của qui trình mua xe).
        details: mảng các giấy tờ thuộc giai đoạn đó cần tạo chung luôn.
    </div>
    <li>[POST] /legals/create-details</li>
    Dùng để tạo ra các giấy tờ trong mỗi giai đoạn (legal details). Khi kích vào mỗi giai đoạn chúng ta nên có nút cộng để tạo thêm giấy tờ cho giai đoạn đó. Cần truyền vô:
    <div>
        {
            "salonId",
            "details": ["de 6", "de 7"],
            "period": id của giai đoạn cần thêm giấy tờ vô. (có kí hiệu là period).
        }
    </div>
    <li>[POST] /legals/process</li>
    Dùng để lấy ra toàn bộ qui trình của 1 salon. Yêu cầu truyền vô {salonId, processId: id của process, không truyền thì lấy tất cả, truyền thì lấy theo id}.
    <li>[PATCH] /legals/update-process</li>
    dùng để cập nhật tên của qui trình. Cần truyền vô:
    {salonId, processId, name, description, type: number}
    <li>[PATCH] /legals/update-documents</li>
    Dùng để cập nhật 1 giai đoạn, cần truyền vô: 
    <div>
        {
            "salonId": "997af3b3-0ccc-41a2-8133-1c0f7ccf268c",
            "period": "8d7ac0ca-ca70-44a7-bcf9-cd13445fa275",
            "details": ["new detail 1", "new detail 2"],
            "name": "new name document 1",
            "order": 1
        }
    </div>
    xin lưu ý:
    <div>
        order: là số thứ tự của giai đoạn, nếu cần đổi thì truyền vô không thì thôi.
        name: là tên mới của giai đoạn, nếu cần đổi thì truyền vô không thì thôi.
        salonId, period: id của giai đoạn cần cập nhật đó (tên biến gốc là period luôn), 2 trường này phải truyền.
        details: là mảng các giấy tờ sau khi cập nhật giai đoạn. Các giấy tờ cũ sẽ bị xóa đi và thay thành các giấy tờ mới này.
    </div>

    <li>[DELETE] /legals/delete-documents</li>
    Dùng để xóa một giai đoạn. Lưu ý là xóa giai đoạn thì các giấy tờ thuộc giai đoạn đó tự động cũng được xóa theo. Cần truyền vô:
    {salonId, period: id của giai đoạn.}

    <li>[DELETE] /legals/delete-process</li>
    Dùng để xóa một qui trình nào đó. Lưu ý là xóa qui trình thì các giai đoạn và các chi tiết của giai đoạn mà thuộc qui trình đó tự động cũng được xóa theo. Cần truyền vô:
    {salonId, processId: id của qui trình.}

    <li>[POST] /legals/check-details-user</li>
    Theo như thảo luận thì cần truyền vô một mảng tất cả giấy tờ đã tick cho user. Vd muốn hủy tick giấy tờ (chi tiết) nào đó thì bên fe cần xóa giấy tờ đó ra khỏi mảng, thêm mới thì 
    thêm vô mảng. Sau cùng truyền mảng đó cho be để cập nhật.
    Salon tích vô các chi tiết trong một giai đoạn cho user. Cần truyền vô:
    {salonId, phone, details: ["Giay to xe", "giay to tuy than", ...], carId}
    <li>[POST] /legals/get-legals-user</li>
    Dùng để lấy ra hiện user đó đã trong giai đoạn nào và có được chi tiết nào rồi. Cần truyền vô: { phone, carId: không truyền thì lấy toàn bộ }

    <li>[PATCH] /legals/update-period-user</li> 
    Theo như thảo luận với bên web thì giai đoạn hiện tại chỉ có ý nghĩa để xem. Bên fe cần check theo tên, nếu khách hàng đủ giấy tờ cho giai đoạn đó rồi thì cần hiện 1 nút next để chuyển sang giai đoạn tiếp theo.
    Dùng để cập nhật một giai đoạn mới cho user. Cần truyền vô:
    <div>
        {
            "salonId": "e03942f6-1fc0-4864-9a70-647a070160d7",
            "carId": "438bc588-400f-413c-b0fa-cb5cadd076fd",
            "phone": "3333333",
            "newPeriod": "f190530c-335e-4a2d-92dd-72c970bc8696"
            
        }
    </div>

    <h2 id="process">Quy trình</h2>
    (Bao gồm các trường: process_id, name, type, salonId, description)
    <li>[GET] /process</li>
    Nó sẽ lấy ra được tất cả các quy trình của salon đó. Nếu có truyền vào QueryString. Ví dụ: http://localhost:5000/process?type=hoatieu thì nó sẽ lấy ra các quy trình hoa tiêu thôi(không truyền lấy cả 2)
    <li>[GET] /process/:id</li>
    Sẽ lấy ra được chi tiết quy trình kèm theo các giai đoạn và chi tiết giai đoạn thuộc về quy trình đó
    <li>[POST] /process</li>
    Thêm quy trình mới. Truyền vào name, type(hoatieu hoac giayto), description
    <li>[PATCH] /process/:id</li>
    Chỉ cập nhật lại được tên quy trình, type(hoatieu hoac giayto), description
    <li>[DELETE] /process/:id</li>
    Xóa quy trình. Khi xóa thì giai đoạn và chi tiết giai đoạn cũng sẽ tự động xóa theo

    <h2 id="stage">Giai đoạn hoa tiêu</h2>
    (Bao gồm các trường: stage_id, name, processId(thuộc về quy trình nào), salonId(salon nào tạo), commissionRate(phần trăm hoa hồng), order: thứ tự)
    Giai đoạn thì nó phải trong 1 quy trình cụ thể, không làm quản lý giai đoạn riêng lẻ 
    <li>[GET] /stages/:id</li>
    Sẽ lấy ra được chi tiết giai đoạn kèm theo đó là chi tiết giai đoạn
    <li>[GET] /stages/process/:processId</li>
    Sẽ lấy ra được các giai đoạn kèm theo chi tiết giai đoạn của 1 quy trình
    <li>[POST] /stages</li>
    Thêm một giai đoạn mới. Lúc này sẽ truyền vào chi tiết của giai đoạn luôn(details). Ví dụ:
    <pre>
    {
        "name": "giai đoạn 2",
        "processId": "f4e30897-3300-4b13-bcad-39805ccbf0f7",
        "order": 2,
        "commissionRate": 1,
        "details": ["CMND"]
    }
    </pre>
    Nếu như order đã có rồi thì nó sẽ báo lỗi
    <li>[PATCH] /stages/:id</li>
    Các trường có thể cập nhật bao gồm: name, commissionRate, order, details
    <li>[DELETE] /stages/:id</li>
    Sẽ xóa giai đoạn kèm theo chi tiết giai đoạn đó luôn

    <h2 id="post">Yêu cầu đăng bán xe</h2>
    (Bao gồm các trường: post_id, title, text(nội dung), postedBy(userId), salons(mảng id các salon có thể xem), image(tối đa 20 ảnh), brand(hãng xe), type(dòng xe), mfg(năm sản xuất), version(phiên bản), gear(hộp số), fuel(nhiên liệu), origin(xuất xứ), design(kiểu dáng), seat(số ghế ngồi), color(màu sắc), licensePlate(biển số xe), ownerNumber(số đời chủ), accessory(phụ kiện đi kèm) boolean, registrationDeadline(hạn đăng kiểm) boolean, kilometer(số km đã đi), price(giá), address(địa chỉ hoa tiêu) createdAt)
    .Này chỉ có user mới được đăng thôi nhé(nên thằng nào mà có salon thì chắc phải ẩn giao diện)
    <b>(Truyền theo form-data)</b>
    <li>[POST] /posts</li>
    Dùng để tạo một bài đăng mới. Truyền vào các trường như trên: text và salons (mảng id các salon được xem bài này)...
    Nếu không truyền vào salons thì nó mặc định là tất cả salon đều được xem
    <b>Lúc này sẽ có thông báo đến thằng salon đó(type = "request"). (Tui vẫn để như cái notification như Quý làm hồi trước, trong đây có id của bài đăng để link tới)</b>
    <li>[GET] /posts/feed</li>
    Salon sẽ gọi API này để xem được các bài mà hoa tiêu đăng lên (những bài này chưa được tạo kết nối)
    <li>[GET] /posts/:id</li>
    Sẽ lấy ra được nội dung chi tiết của bài đăng (có kèm người đăng)
    <div><b>Trong đây có bao gồm phần trăm đánh giá trung bình của hoa tiêu này (avgRating), số giao dịch đã hoàn thành(completedTransactions). Những thông tin này giúp salon có tạo kết nối hay không ...</b></div>
    
    <h2 id="block">Chặn hoa tiêu</h2>
    <li>[POST] /block-user</li>
    Cần truyền vào postId (Chỗ thông báo chắc tụi ông thêm button hay gì đó hiển thị là không nhận thông báo từ user này chẳng hạn. Xong gọi API này, data của thông báo có postId thì truyền vào đây).
    <b>Khi chặn xong thì tụi ông nhớ gọi API để nó xóa thông báo đó luôn nha</b>
    <h3>Gỡ block</h3>
    <li>[GET] /salons/users/blocked</li>
    Ban đầu salon sẽ gọi API này để xem được danh sách các hoa tiêu mà mình đã chặn (có user_id và fullname)
    <li>[POST] /block-user/un</li>
    Sau đó gọi tiếp API này truyền vào userId để unblock
    <li>[GET] /salons/no-block</li>
    Sẽ lấy ra được danh sách các salon (salon_id, name) mà hoa tiêu này được phép gửi.
    Thì lúc mà user đó nó đăng yêu cầu bán xe mới thì cần gọi API này để load ra các salon mà nó được phép gửi (không gọi /salons nữa)

    <h2 id="connection">Kết nối</h2>
    (Bao gồm các trường: connection_id, salonId, userId, postId, createdAt, status, processId(Id của quy trình mà salon sẽ áp dụng cho thằng này) )
    .Sau khi xem bài đăng xong thì nếu salon nào quan tâm muốn kết nối thì sẽ gọi API này
    <li>[POST] /connections</li>
    Sẽ tạo ra kết nối giữa salon và thằng đăng bài. Cần truyền vào postId và processId(này dùng để cho thằng đăng xem được các bước và phần trăm hoa hồng giúp nó có chấp nhận hay không).
    Lúc này sẽ có thông báo đến thằng user(trong data có connection_id để link tới, type = "connection").
    <b>Nếu như có kết nối rồi mà tạo nữa thì nó sẽ báo lỗi, tui có trả về connection_id đã tạo trước đó</b>
    <li>[GET] /connections</li>
    Nếu nó là user thường (người đăng) thì nó sẽ lấy ra được các kết nối giữa nó và các salon.
    Nếu nó là chủ salon thì nó sẽ lấy ra được các kết nối giữa salon của nó và thông tin những người đăng
    <li>[GET] /connections/:id</li>
    Sẽ lấy ra được chi tiết kết nối bao gồm trạng thái, ngày tạo, salon nào, user nào, quy trình nào để thằng đăng nó đọc xem có chập nhận không
    <li>[PATCH] /connections/:id</li>
    Cần truyền vào status (string). Status có 3 trạng thái: ('pending', 'accepted', 'rejected'). Khi tạo ra mặc định ban đầu sẽ là pending.
    Lúc từ chối kết nối thì sẽ có thông báo đến salon. Nếu chấp nhận cũng có thông báo và nó sẽ chạy quy trình gồm các bước mà salon đã đặt ra (có connection_id để link tới).
    Lúc cập status thành accepted xong thì nó sẽ tự tạo ra dòng dữ liệu (transaction) (Nếu như process đó mà không có stage nào thì nó cũng sẽ báo lỗi)

    <h2 id="commission">Ghi nhận hoa hồng</h2>
    (Bao gồm các trường: transaction_id, connectionId, checked(mảng này cho biết là id chi tiết giai đoạn nào đã check),userId, salonId, processId(thực hiện theo quy trình nào), stageId(đang tời giai đoạn nào), commissionList(mảng hoa hồng của các giai đoạn), ratingList(mảng đánh giá của các giai đoạn) status)
    <div>
        <b>Ý tường mà tui làm sẽ là:</b>
        Lúc mà nó chấp nhận kết nối thì bảng này sẽ tự động tạo và nó sẽ gán mặc định giai đoạn đầu tiên của quy trình đó vào stageId, mảng checked ban đầu sẽ là rỗng. Sau đó check gì sẽ có API để cập nhật lại, nếu xong rồi thì khi nhấn next sẽ có API kiểm tra xem nó có đủ điều kiện qua không. Tại bước này cần nhập hoa hồng(số tiền mà salon đã chi ra thực tế cho hoa tiêu đó. Cái trên chỉ là phần trăm hoa hồng thôi. Nũa mình dùng thông tin này để thống kê). Nếu nó đủ điều kiện qua nghĩa là ở giai đoạn đó đã check hết thì nó sẽ tự động cập nhật lại stageId sang giai đoạn tiếp theo. Đến khi nào gọi API mà nó có status là completed thì có nghĩa là xong, nó tự cập nhật lại status là success. Lúc này tụi ông nhớ kiểm tra và đừng cho nó gọi next nữa
    </div>
    <li>[GET] /transactions</li>
    Sẽ lấy ra được tất cả các giao dịch của salon mình với các hoa tiêu. Nếu là user thì lấy ra được tất cả các giao dịch của mình với các salon (Lấy ra đươc tình trạng, tên user, quy trình áp dụng, ngày tạo kết nối)
    <b>Ở đây đã được thêm search theo tên của salon và tên hoa tiêu</b>
    <li>[GET] /transactions/statistics</li>
    Dùng để thống kê cho hoa tiêu và salon về giao dịch buôn bán xe. Lấy ra được các salon mà hoa tiêu đã giao dịch, có tổng tiền mà từng salon đã chi và số giao dịch hoàn thành với salon đó. Total có 2 cái là totalAmount (tổng số tiền nhận được từ tất cả salon) và totalNumOfCompletedTran (tổng số giao dịch hoàn thành từ tất cả salon)
    <li>[GET] /transactions/:id</li>
    Nó sẽ lấy ra được chi tiết của giao dịch đó
    <li>[PATCH] /transactions/:id/details</li>
    Cập nhật lại chi tiết giai đoạn. Truyền vào mảng id các chi tiết giai đoạn đã check, stageId(nếu muốn quay lại). Ví dụ ban đầu check 1 chi tiết thì truyền 1, lúc sau check 2 thì phải truyền cả 2 qua:
    <pre>
    {
        "checked": ["d3f52dc8-d67f-48c5-8dd4-c76c0b08e38b"],
        "stageId": ...
    }
    </pre>
    <b>Lúc cập nhật sẽ có thông báo cho hoa tiêu. Trong phần data của thông báo có transaction_id để hoa tiêu đó link tới xem</b>
    <li>[PATCH] /transactions/:id/next</li>
    Có thể truyền vào commission (tiền hoa hồng mà salon đã chi thực sự), rating(đánh giá ở giai đoạn này). Ví dụ:
    <pre>
    {
        "commission": 123,
        "rating": 100
    }
    </pre>
    Lúc này cũng sẽ có thông báo cho user là quy trình bán xe của bạn với salon ... đã chuyển sang giai đoạn tiếp theo, hay khi hoàn tất thì cũng có thông báo (type đều là updateStage)
    <div>Nó sẽ ghi nhận lại hoa hồng và đánh giá ở giai đoạn đó. Nếu không truyền thì giai đoạn đó hoa hồng = 0, rating = -1</div>
    <div>Khi mà quy trình hoàn tất thì nó sẽ dựa vào các đánh giá hiện có, nó sẽ tính ra giá trị trung bình và gán ngược lại cho user và sẽ tăng số giao dịch hoàn thành lên</div>
    
    <li>[DELETE] /transactions/:id</li>
    Sẽ xóa được giao dịch với hoa tiêu

    <h2 id="pagination">Phân trang</h2>
    <div>Nếu là POST thì thêm ở body, GET thì thêm ở query. Nếu không truyền thì mặt định page =1 và per_page = 1000 (hàm ý là lấy hết)</div>
    cần truyền thêm vô {page: 1 (Trang thứ mấy), per_page: 5 (Mỗi trang có bao nhiêu bài), q: "cần tìm kiếm theo từ khóa nào.} 
    <div>Hiện đã phân trang ở: </div>
    <li>[POST] /invoice/get-invoice-buy-car-salon</li>
    Với api này thì search theo fullname
    <li>[POST] /appointment/get-appoint-admin</li>
    Với api này thì search theo fullname của user
    <li>[POST] /appointment/get-appoint-user</li>
    <li>[POST] /invoice/get-invoice-buy-car</li>
    Tìm kiếm theo fullname. Nếu muốn đổi qua phone thì nói ha.
    <li>[GET] /accessory/salon/:salonId</li>
    Tìm kiếm theo name.
    <li>[GET] /cars</li>
    Tìm kiếm theo name.
    <li>[GET] /cars/brand/:brand/salon/:salon_id</li>
    Tìm kiếm theo name.
    <li>[GET]/connections</li>
    Không có search.
    <li>[GET] /features</li>
    Tìm kiếm theo name.
    <li>[GET] /invoice</li>
    Tìm kiếm theo fullname.
    <li>[POST] /legals/process</li>
    Tìm kiếm theo name.
    <li>[GET] /maintenance/</li>
    Tìm kiếm theo name.
    <li>[GET] /packages</li>
    Tìm kiếm theo name.
    <li>[GET] /posts/feed</li>
    Tìm kiếm theo name(tên người đăng).
    <li>[GET] /process</li>
    Tìm kiếm theo name.
    <li>[GET] /salons</li>
    Tìm kiếm theo name.
    <li>[POST] /warranty</li>
    Tìm kiếm theo name.
    <li>[GET] /maintenance/salon/:salonId</li>
    Tìm kiếm theo name.
    <li>[POST] /salons/employees</li>
    Tìm kiếm theo fullname.
    <li>[GET] /transactions</li>
    Với salon thì tìm kiếm theo tên hoa tiêu.
    Với hoa tiêu thì tìm kiếm theo tên salon.
    <li>[POST] /salons/user</li>
    Tìm kiếm theo fullname.
    <li>[GET] /admin/users</li>
    Tìm kiếm theo fullname.
    <li>[GET] /admin/salons</li>
    Tìm kiếm theo name.
    <li>[GET] /salon-payment/</li>
    Nếu là người dùng thì tìm kiếm theo tên salon. Là salon tìm kiếm theo sdt người dùng.
    <li>[GET] /buy-accessory</li>
    Nếu là người dùng thì tìm kiếm theo tên salon. Là salon tìm kiếm theo tên người dùng.
    
    <h2 id="buy-accessory">Hóa đơn mua phụ tùng</h2>
    <li>[GET] /buy-accessory</li>
    Nó sẽ lấy ra được thông tin tất cả các hóa mua phụ tùng (thông tin khách hàng, các phụ tùng đã mua) tại salon mình (Đối với chủ salon) (Có phân trang, search)
    <div>
        Còn nếu là khách hàng muốn xem lịch sử thì nó sẽ lấy được theo số điện thoại trên hóa đơn và số điện thoại của nó trong ứng dụng (Có gì tụi ông nhớ cập nhật số điện thoại của chính nó thì mới lấy được lịch sử nha)
    </div>
    <li>[GET] /buy-accessory:/id</li>
    Lấy ra thông tin chi tiết của hóa đơn MUA PHỤ TÙNG
    <li>[POST] /buy-accessory</li>
    Tạo hóa đơn mua phụ tùng mới. Các trường cần truyền vào ví dụ như sau:
    <pre>
    {
        "accessories": [
            { "accessory_id": "28ce64c6-a650-4234-844f-6f5e4fcdb836" }
        ],
        "note": "Buy accessory",
        "fullname": "Nguyen",
        "email": "nguyen123@gmail.com",
        "phone": "0966841272"
    }
    </pre>
    Nếu không truyền quantity vào thì mặc định nó sẽ là 1
    <li>[PATCH] /buy-accessory/:id</li>
    Dùng để cập nhật hóa đơn mua phụ tùng. Có thể cập nhật { accessories, note, fullname, email, phone}. Muốn cập nhật trường nào thì truyền vào trường đó. Ví dụ:
    <pre>
    {
        "accessories": [
            { "accessory_id": "33710672-78e9-4158-84d5-569552bd64b3", "quantity": 2 },
            { "accessory_id": "34b4bbec-aa1c-4ad0-98e6-6263d14a1ceb", "quantity": 2 }
        ]
    }
    </pre>
    <li>[DELETE] /buy-accessory/:id</li>
    Xóa hóa đơn mua phụ tùng

    <h2 id="promotion">Đăng tin khuyến mãi</h2>
    (Bao gồm các trường: promotion_id, title, description, contentHtml, contentMarkdown, startDate, endDate, banner(array tối đa 5 ảnh), createdAt, updatedAt, salonId )
    <li>[GET] /promotions</li>
    Lấy được hết tất cả các thông tin khuyến mãi (id, title, description, thumbnail(banner[0]), createdAt, salon)
    <li>[GET] /promotions/salon/:salonId</li>
    Lấy được hết tất cả các thông tin khuyến mãi tại 1 salon
    <li>[GET] /promotions/:id</li>
    Lấy được chi tiết thông tin khuyến mãi. Có lấy ra được salon_id để tụi ông link qua salon đó
    <li>[POST] /promotions</li>
    Thêm một thông tin khuyến mãi mới. Các fields truyền vào bao gồm: title, description, contentHtml, contentMarkdown, startDate, endDate, banner(array tối đa 5 ảnh)
    <b>Truyền theo form-data</b>
    <li>[PATCH] /promotions/:id</li>
    Sửa một tính năng khi biết id. Các fields có thể sửa: title, description, contentHtml, contentMarkdown, startDate, endDate, banner. Thích sửa nào thì truyền cái đó
    <li>[DELETE] /promotions/:id</li>
    Xóa thông tin khuyến mãi khi biết id

    <h2 id="group">Tạo group salon (khi gửi yêu cầu bán xe)</h2>
    (Bao gồm các trường: group_id, name, salons(mảng id các salon), userId(người tạo) )
    <li>[GET] /group/salon</li>
    Lấy được hết tất cả các group salon mà user đã tạo ra (tên nhóm, tên các salon)
    <li>[GET] /group/salon/:id</li>
    Lấy chi tiết group salon gồm có tên nhóm và tên các salon 
    <li>[POST] /group/salon</li>
    Thêm nhóm salon mới. Các fields truyền vào bao gồm: name, salons. Ví dụ:
    <pre>
        {
            "name": "Salon HCM",
            "salons": ["e03942f6-1fc0-4864-9a70-647a070160d7", "c8049683-0d41-4561-8c82-d61c6e2fea8f"]
        }
    </pre>
    <li>[PATCH] /group/salon</li>:id/li>
    Sửa group salon. Có thể sửa name và salons
    <li>[DELETE] /group/salon/:id</li>
    Xóa 1 group salon

    <h2 id="notification-offline">Notification khi offline (Android)</h2>
    <li>Khi login, tui đặt fcmToken là: androidFcmToken</li>
    <li>Trong này tui có gửi file và những chỗ nó chỉ, ông thêm vào bên ông nha để FCM nó gửi đúng đến ứng dụng của mình:
        <a href="https://drive.google.com/drive/folders/1LbPDFkmaouzoMpxB43otHQ-GgQKY8mFc?usp=sharing">Link</a>
    </li>

    <h2 id="salon-payment">Salon tạo thanh toán gửi cho khách hàng</h2>
    <li>[GET] /salon-payment</li>
    Lấy ra danh sách các phiếu thanh toán của khách hàng or salon. Nếu truyền vô ?id thì sẽ lấy phiếu thanh toán với id đó.
    Lưu ý kết quả trả về creator: là người nhân viên tạo ra phiếu thanh toán đó, dùng để hiển thị thôi. Nếu muốn lọc status = true thì truyền vô luôn
    <li>[POST] /salon-payment/create</li>
    Yêu cầu là chủ salon or nhân viên có quyền C_PMSL. Dùng để tạo ra phiếu thanh toán và gửi cho khách hàng. Yêu cầu truyền vô: {cusPhone: số điện thoại khách hàng, cusFullname: tên khách hàng, reason: lý do nội dung tạo hóa đơn, amount: số tiền, salonId, methodPaymentId: id của phương thức thanh toán cho salon, invoiceId}.
    <div>Sau khi tạo thành công thì bên khách hàng sẽ nhận được thông báo cần thanh toán, type là salon-payment, data là id của phiếu hóa đơn.</div>
    <div>Lưu ý: nếu truyền invoiceId thì có thể không cần truyền các trường {cusPhone, cusFullname, reason, amount}</div>
    <li>[POST] /salon-payment/confirm-user</li>
    Khách hàng ấn xác nhận đã thanh toán, và sẽ gửi thông báo về cho salon. Yêu cầu truyền vô {id: id của phiếu thanh toán (data trong thông báo.)}
    <li>[POST] /salon-payment/confirm-salon</li>
    Yêu cầu nhân viên có quyền U_PMSL or chủ salon. Salon xác nhận là đã nhận khoản thanh toán từ user. Sau khi xác nhận sẽ gửi thông báo về cho khách hàng, type là salon-payment, data là id của phiếu thanh toán.
    <div>Yêu cầu truyền vô: {salonId, id: id của phiếu thanh toán.}</div>
    <li>[DELETE] /salon-payment/:id</li>
    Yêu cầu có quyền D_PMSL or chủ salon. Dùng để xóa phiếu thanh toán với id đó. Truyền id qua params.

    <h3>Phương thức thanh toán của salon</h3>
    <li>[GET] /salon-payment/method</li>
    Lấy ra danh sách các phương thức thanh toán của salon. Nếu truyền vô ?id thì sẽ lấy theo id đó. Vì mỗi salon có cùng lắm 5 phương thức nên không phân trang.
    <li>[POST] /salon-payment/create-method</li>
    Yêu cầu là chủ salon or nhân viên có quyền C_PMT. Dùng để tạo ra phương thức thanh toán cho salon. Yêu cầu truyền vô: {type: kiểu phương thức (momo, agribank,...), content: Nội dung của phương thức (Số tài khoản), fullname: Tên người dùng của phương thức}.
    <li>[PATCH] /salon-payment/method</li>
    Yêu cầu là chủ salon or nhân viên có quyền U_PMT. Dùng để cập nhật thông tin phương thức. Cần truyền vô cái muốn cập nhật: {id: bắt buộc, content, type, fullname: nếu cần update.}
    <li>[DELETE] /salon-payment/method/:id</li>
    Yêu cầu có quyền D_PMT or chủ salon. Dùng để xóa phương thức thanh toán với id đó. Truyền id qua params.

</body>

</html>